<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html> <head>
<title></title>



<script type="text/javascript"> 
const midiEventTest = `
<CsoundSynthesizer>
<CsOptions>
-M0
</CsOptions>
<CsInstruments>
sr = 44100
ksmps = 128
nchnls = 2
0dbfs = 1

instr 1

  kstatus, kchan, kdata1, kdata2 midiin

  ktrig changed kstatus

  if ktrig == 1 then
    printks "kstatus= %d, kchan = %d, kdata1 = %d, kdata2 = %d\\n", 0, kstatus, kchan, kdata1, kdata2
  endif

endin

</CsInstruments>
<CsScore>
f 0 3600

</CsScore>
</CsoundSynthesizer>
`;

const csoundjs = "../js/csound.js";
// csound is the Csound engine object (null as we start)
let csound = null;
const startCsound = async () => {
  if (csound) {
    return;
  }

  console.log("Starting Csound...");
  const { Csound } = await import(csoundjs);
  csound = await Csound();

  await csound.compileCsdText(midiEventTest);
  await csound.start();
};

function onload(){
document.getElementById("start button").addEventListener("click", startCsound);
}
</script>
</head>

<body onload="onload()">
<h1></h1>

<input type="button" id="start button"  value="OFF">

<hr>
<address></address>
<!-- hhmts start -->Last modified: Fri Dec  2 10:08:47 GMT 2022 <!-- hhmts end -->
</body> </html>
